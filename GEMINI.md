# 프로젝트명: 이미지 슬라이드쇼 에디터 (Vite + React + TypeScript)

---

## 개요

이미지를 업로드하여 타임라인 기반의 슬라이드쇼를 웹에서 편집하고 미리볼 수 있는 에디터입니다. 위치, 크기, 회전, 전환 효과 등 다양한 설정을 제공합니다.


## 주요 기능

- 이미지 업로드 (드래그앤드롭 및 파일 선택)
- 타임라인 기반 슬라이드 순서 및 재생 시간 설정 (드래그 앤 드롭으로 순서 변경 가능)
- 이미지별 위치, 크기, 회전 조절
- 전환 효과 및 전환 시간 설정
- 실시간 미리보기 지원
- JSON 형식으로 프로젝트 내보내기

---

## 기술 스택

- Vite
- React
- TypeScript
- React Icons
- react-draggable
- html2canvas
- <!-- Import failed: dnd-kit/core - ENOENT: no such file or directory, access '/Users/lahuman/DEV/slideshow-editor/dnd-kit/core' -->
- <!-- Import failed: dnd-kit/sortable - ENOENT: no such file or directory, access '/Users/lahuman/DEV/slideshow-editor/dnd-kit/sortable' -->

---

## 프로젝트 구조

```
src/
  components/
    ImageLibrary.tsx
    Timeline.tsx
    ImageCanvas.tsx
    ControlPanel.tsx
    PreviewModal.tsx
    DraggableItem.tsx
    SortableTimelineItem.tsx
  types/
    index.ts
  App.tsx
  App.css
  main.tsx
```

---

## 주요 컴포넌트 및 역할

- `App.tsx`: 전체 상태 관리, 주요 화면 배치 및 이벤트 핸들링
- `ImageLibrary.tsx`: 이미지 업로드 및 라이브러리 관리
- `Timeline.tsx`: 슬라이드 타임라인 편집 및 재생 헤드 표시
- `ImageCanvas.tsx`: 현재 슬라이드 이미지 위치 및 크기 조절 가능 화면
- `ControlPanel.tsx`: 선택된 슬라이드 속성 편집
- `PreviewModal.tsx`: 슬라이드쇼 미리보기 모달
- `types/index.ts`: 타입스크립트 인터페이스 및 타입 정의

---

## 사용 방법

1. 프로젝트 생성 및 의존성 설치
```bash
npm create vite@latest slideshow-editor --template react-ts
cd slideshow-editor
npm install react-icons react-draggable html2canvas @dnd-kit/core @dnd-kit/sortable
npm install @types/react-draggable --save-dev
```

2. 소스 코드 복사 및 붙여넣기

3. 개발 서버 실행
```bash
npm run dev
```

4. 웹 브라우저에서 `http://localhost:5173` 접속

---

## 실행 및 빌드

- 개발 서버: `npm run dev`
- 빌드: `npm run build`
- 미리보기: `npm run preview`

---

## 작업 내역

- **다크 모드 지원**:
  - `index.css`에 라이트/다크 모드에 대한 시맨틱 색상 변수를 정의.
  - `App.css`의 하드코딩된 색상 값을 CSS 변수로 대체하여 시스템 설정에 따라 테마가 자동으로 전환되도록 리팩토링.
- **React 18+ 호환성 확보**: `react-draggable` 라이브러리 사용 시 발생하는 `findDOMNode` 오류를 `nodeRef`를 사용하도록 수정하여 해결.
- **React Hooks 규칙 준수**: 잘못된 Hook 사용으로 인한 오류를 방지하기 위해 `ImageCanvas` 컴포넌트의 로직을 `DraggableItem` 자식 컴포넌트로 분리하여 리팩토링.
- **타임라인 기능 개선**:
  - 슬라이드 삭제 시, 후속 슬라이드들의 시작 시간이 자동으로 재계산되어 타임라인의 빈 공간이 생기지 않도록 버그 수정.
  - `@dnd-kit` 라이브러리를 도입하여 타임라인 아이템의 드래그 앤 드롭 순서 변경 기능 구현.
- **사용자 인터페이스(UI) 및 경험(UX) 개선**:
  - 타임라인 아이템의 드래그 동작(이미지 영역)과 선택 동작(그 외 영역)을 명확히 분리.
  - 타임라인에서 특정 슬라이드를 선택하면, 메인 캔버스에 해당 슬라이드가 표시되도록 연동.
  - 타임라인 아이템의 이미지 크기를 고정하고, 아이템 너비가 좁을 경우 파일명이 말줄임표(...)로 표시되도록 스타일 수정.
  - 좌우 사이드 패널을 열고 닫는 접이식 기능 추가.
  - 타임라인 아이템을 다른 아이템 바로 뒤에 쉽게 붙일 수 있도록 스냅 기능 추가.
- **슬라이드 전환 기능 구현**:
  - 재생 시 슬라이드 간에 '페이드', '슬라이드', '줌', '플립' 전환 효과가 적용되도록 구현.
  - '전환 효과 없음' 옵션 추가.
- **다중 트랙 타임라인 및 간트 차트 UI**:
  - 타임라인을 여러 트랙(Y축)으로 확장하여 여러 이미지를 동시에 표시할 수 있도록 변경.
  - 2D 드래그 앤 드롭(시간 및 트랙 이동) 및 충돌 감지 로직 구현.
  - 시간 눈금자, 트랙 레이블, 그리드 라인을 포함하는 간트 차트 스타일의 UI로 리팩토링.
- **버그 수정**:
  - 타임라인의 레이아웃이 깨지거나 전체 페이지 스크롤이 발생하는 문제를 여러 차례에 걸쳐 수정.
  - 속성 편집(크기, 회전) 시 캔버스에 실시간으로 반영되지 않던 문제 해결.
  - 다수의 타입스크립트 컴파일 오류 수정.
  - 타임라인 아이템 드래그 앤 드롭 동작 오류 수정: 선택되지 않은 아이템을 드래그 시, 이전에 선택된 아이템이 대신 이동하는 상태 관리 버그를 해결하고, 드래그 동작의 전반적인 안정성을 개선.
  - 타임라인 아이템의 지속 시간(duration) 입력 필드가 동작하지 않는 버그를 수정.
  - 미리보기 모달에서 이미지가 편집기에서 배치한 것처럼 보이지 않던 버그 수정: `getSlideStyle` 함수에서 `position.x`와 `position.y`를 사용하여 이미지 위치를 정확히 반영하고, `preview-slide` div에 기본 너비와 높이를 설정하여 스케일링이 올바르게 적용되도록 수정.
- **전체 UI 레이아웃 안정화**:
  - Flexbox 레이아웃을 재구성하여 창 크기 조절 및 사이드 패널 토글 시 발생하던 UI 깨짐 현상 수정.
  - `index.css`의 전역 스타일을 수정하여 뷰포트 관련 버그의 근본 원인 해결.
  - 타임라인 컨텐츠가 많아져도 페이지 전체가 아닌, 타임라인 내부에만 스크롤이 생성되도록 보장.
- **속성 패널 리팩토링**:
  - 패널을 '캔버스 속성'과 '아이템 속성'으로 명확히 분리.
  - 캔버스의 너비, 높이, 배경색을 직접 수정할 수 있는 기능 추가.
- **타임라인 아이템 기능 고도화**:
  - '지속시간' 입력 필드의 최소값(1초)과 최대값(100초)을 설정.
  - 사용성 개선을 위해 `onChange`가 아닌 `onBlur` 이벤트 발생 시 유효성을 검사하고 값을 업데이트하도록 변경.
- **다중 선택 기능 구현**:
  - Ctrl/Cmd + 클릭, Shift + 클릭을 이용한 표준 다중 선택 기능 구현.
  - 여러 아이템을 동시에 선택하고 속성 패널에서 한 번에 수정하는 기능 추가.
  - 속성 값이 서로 다를 경우, 입력 필드에 '혼합' 상태가 표시되도록 구현.
  - 타임라인과 캔버스 양쪽에서 선택된 모든 아이템이 시각적으로 하이라이트되도록 개선.
  - 드래그 앤 드롭으로 여러 아이템을 함께 이동시키는 기능 추가.
- **캔버스 및 미리보기 기능 개선**:
  - **반응형 캔버스 구현**: `ResizeObserver`를 사용하여 컨테이너 크기에 맞춰 캔버스 종횡비(16:9, 4:3 등)가 동적으로 유지되도록 수정. 하드코딩된 캔버스 크기를 제거하여 반응형 레이아웃을 구현.
  - **이미지 위치 및 경계 문제 해결**:
    - 새 이미지를 타임라인에 추가할 때, 동적으로 계산된 캔버스 크기를 기준으로 중앙에 정확히 배치되도록 수정.
    - `react-draggable`의 `bounds` 속성을 사용하여 이미지를 캔버스 영역 밖으로 드래그할 수 없도록 제한.
  - **미리보기 모달 개선**:
    - 미리보기 캔버스 또한 메인 캔버스와 동일한 종횡비를 유지하며, 내용물이 비율에 맞게 스케일링되도록 리팩토링.
    - 모달 창의 크기가 내용물의 종횡비에 맞게 조절되어 불필요한 여백이 생기지 않도록 수정.
    - 전체 화면 모드에서 캔버스만 중앙에 표시되고, 헤더와 컨트롤러는 숨겨지도록 UI/UX 개선.
    - 미리보기의 반복 재생 기능을 기본적으로 활성화하도록 변경.
- **UI 레이아웃 버그 수정**:
  - Flexbox 레이아웃 문제를 해결하여 헤더의 우측 패널 토글 버튼이 화면 크기에 따라 아래로 떨어지는 현상을 수정.

---

## 기타 사항

- 자동 저장 기능
- 추가 전환 효과와 이미지 필터 지원 예정
- 코드 품질: 타입스크립트 엄격모드 및 코드 린팅 적용
